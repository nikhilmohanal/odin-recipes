(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{269:function(t,e,n){"use strict";n.r(e);var r=n(779),i=n.n(r),o=n(780),s=n.n(o),a=(n(923),n(1)),c=n.n(a),u=n(5),f=n.n(u),l=n(4),h=n(791),p=function(){function t(e){i()(this,t),this.$context=e,this.$options=e.find(".sort-option"),this.$reviewsContainer=e.closest(".recipe-reviews"),this.$reviews=e.closest(".recipe-reviews").find(".recipe-reviewed-items"),this.$more=e.closest(".recipe-reviews").find(".recipe-reviews-link"),this.$pagination=e.closest(".recipe-reviews").find(".pagination-numbers"),this.$trigger=e.find(".sort-title-trigger"),this.$selected=e.find(".sort-title-selected"),this.id=c()(e).closest(".recipe-reviews").data("id")||null,this.ugcId=c()(e).closest(".ugc-reviews").data("id")||null,this.sort=e.find(".sort-option.active").data("sort")||null,this.$context.addClass("initialized")}return s()(t,[{key:"renderReviews",value:function(t){t&&(this.$reviews.html(t.html),f()(l.qb).broadcast(t.reviews,!0),c()("body").hasClass("reviews-page-active")||f()(l.n).broadcast())}},{key:"getReviews",value:function(){var t=this;if(this.sort){var e=Object(h.a)("/element-api/content-proxy/reviews"),n=0,r=c()("body").hasClass("reviews-page-active");r&&this.$reviewsContainer.data("page")&&(n=this.$reviewsContainer.data("page"),this.setPaginationLinks());var i={id:c()(".component.ugc-reviews").is(":visible")?this.ugcId:this.id,page:n,sort:this.sort};r&&(i.is_reviews_sort_page=!0),c.a.get(e,i,(function(e){t.setSortLink(t.$more),t.renderReviews(e)}))}}},{key:"setSortLink",value:function(t){if(this.sort&&t.length&&t.attr("href")){var e=new URLSearchParams(t.attr("href"));-1!==t.attr("href").indexOf("sort")?e.set("sort",this.sort):e.append("sort",this.sort),t.attr("href","?".concat(e.toString()))}}},{key:"setPaginationLinks",value:function(){var t=this;this.sort&&this.$pagination.length&&this.$pagination.find(".pagination-number").length&&this.$pagination.find(".pagination-number").each((function(e,n){t.setSortLink(c()(n))}))}},{key:"events",value:function(){var t=this;f()(l.o).subscribe((function(e,n){var r=n.closest(t.$options);if(r.length&&(e.preventDefault(),t.sort!==r.data("sort"))){t.$options.removeClass("active"),r.addClass("active"),t.sort=r.data("sort");var i=r.text()?r.text().trim():"";t.$selected.text(i),t.$options.each((function(t,e){var n=c()(e).text()?c()(e).text().trim():"";c()(e).find(".sort-option-title").attr("aria-label","Sort by ".concat(n))})),r.find(".sort-option-title").attr("aria-label","".concat(i," (Selected)")),t.getReviews()}if(n.closest(".sort-title-trigger").length){e.preventDefault();var o=n.closest(t.$context).find(".sort-options");o.hasClass("open")?(o.removeClass("open"),t.$trigger.attr("aria-expanded",!1)):(o.addClass("open"),t.$trigger.attr("aria-expanded",!0))}else c()(".recipe-reviews-sort .sort-options").length&&c()(".recipe-reviews-sort .sort-options").removeClass("open")}))}},{key:"init",value:function(){this.events()}}]),t}();e.default=function(){c()(".component.recipe-reviews-sort").each((function(){new p(c()(this)).init()})),f()(l.pb).subscribe((function(){c()(".component.recipe-reviews-sort:not(.initialized)").each((function(){new p(c()(this)).init()}))}))}},779:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},780:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},791:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n.n(r),o=n(1),s=n.n(o);function a(t){return s()(document.body).data("add-slash")&&!i.a.endsWith(t,"/")?"".concat(t,"/"):t}},923:function(t,e,n){(function(t){!function(t){"use strict";var e,n=function(){try{if(t.URLSearchParams&&"bar"===new t.URLSearchParams("foo=bar").get("foo"))return t.URLSearchParams}catch(t){}return null}(),r=n&&"a=1"===new n({a:1}).toString(),i=n&&"+"===new n("s=%2B").get("s"),o=!n||((e=new n).append("s"," &"),"s=+%26"===e.toString()),s=f.prototype,a=!(!t.Symbol||!t.Symbol.iterator);if(!(n&&r&&i&&o)){var c;s.append=function(t,e){d(this.__URLSearchParams__,t,e)},s.delete=function(t){delete this.__URLSearchParams__[t]},s.get=function(t){var e=this.__URLSearchParams__;return this.has(t)?e[t][0]:null},s.getAll=function(t){var e=this.__URLSearchParams__;return this.has(t)?e[t].slice(0):[]},s.has=function(t){return w(this.__URLSearchParams__,t)},s.set=function(t,e){this.__URLSearchParams__[t]=[""+e]},s.toString=function(){var t,e,n,r,i=this.__URLSearchParams__,o=[];for(e in i)for(n=l(e),t=0,r=i[e];t<r.length;t++)o.push(n+"="+l(r[t]));return o.join("&")},!!i&&n&&!r&&t.Proxy?(c=new Proxy(n,{construct:function(t,e){return new t(new f(e[0]).toString())}})).toString=Function.prototype.toString.bind(f):c=f,Object.defineProperty(t,"URLSearchParams",{value:c});var u=t.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(t,e){var n=v(this.toString());Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){t.call(e,n,r,this)}),this)}),this)},u.sort=u.sort||function(){var t,e,n,r=v(this.toString()),i=[];for(t in r)i.push(t);for(i.sort(),e=0;e<i.length;e++)this.delete(i[e]);for(e=0;e<i.length;e++){var o=i[e],s=r[o];for(n=0;n<s.length;n++)this.append(o,s[n])}},u.keys=u.keys||function(){var t=[];return this.forEach((function(e,n){t.push(n)})),p(t)},u.values=u.values||function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},u.entries=u.entries||function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),p(t)},a&&(u[t.Symbol.iterator]=u[t.Symbol.iterator]||u.entries)}function f(t){((t=t||"")instanceof URLSearchParams||t instanceof f)&&(t=t.toString()),this.__URLSearchParams__=v(t)}function l(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,(function(t){return e[t]}))}function h(t){return t.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(t){return decodeURIComponent(t)}))}function p(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return a&&(n[t.Symbol.iterator]=function(){return n}),n}function v(t){var e={};if("object"==typeof t)if(g(t))for(var n=0;n<t.length;n++){var r=t[n];if(!g(r)||2!==r.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");d(e,r[0],r[1])}else for(var i in t)t.hasOwnProperty(i)&&d(e,i,t[i]);else{0===t.indexOf("?")&&(t=t.slice(1));for(var o=t.split("&"),s=0;s<o.length;s++){var a=o[s],c=a.indexOf("=");-1<c?d(e,h(a.slice(0,c)),h(a.slice(c+1))):a&&d(e,h(a),"")}}return e}function d(t,e,n){var r="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);w(t,e)?t[e].push(r):t[e]=[r]}function g(t){return!!t&&"[object Array]"===Object.prototype.toString.call(t)}function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(void 0!==t?t:"undefined"!=typeof window?window:this)}).call(this,n(74))}}]);
//# sourceMappingURL=55-45a80af4.js.map